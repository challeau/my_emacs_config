#include "minirt.h"

size_t    ft_strlen(const char *str){
    size_t i = 0;

    while (str[i])
        i++;
    return (i);
}

void    ft_memdel(char *ptr){
    if (ptr){
        free (ptr);
        ptr = NULL;
    }
}

char    *ft_calloc(size_t size){
    char *new;

    if (!(new = (char *)malloc(size * sizeof(char))))
        return (NULL);
    while (size--)
        new[size] = '\0';
    return (new);
}

char    *ft_add_char(char *src, char to_add){
    size_t i = 0;
    char *new = ft_calloc(ft_strlen(src) + 2);

    while (src[i]){
        new[i] = src[i];
        i++;
    }
    new[i] = to_add;
    new[i + 1] = '\0';
    ft_memdel(src);
    return (new);
}

int    get_next_line(char **line){
    int    ret;
    static char    *buff;

    if (!line)
        return (-1);
    buff = ft_calloc(2);
    *line = ft_calloc(2);
    while (*buff != '\n' && (ret = read(0, buff, 1)) > 0){
        if (*buff == '\n')
            break ;
        *line = ft_add_char(*line, *buff);
    }
    ft_memdel(buff);
    return (ret);
}

#include "../minirt.h"

bool	parse_color(char *attributes, t_scene *scene){
	int	rgb[3];
	int	i;

	i = 0;
	while (i <= 2){
		rgb[i++] = ft_atoi(attributes);
		if (i != 2)
			attributes++;
		if (rgb[i] < 0 || rgb[i] > 255)
			return (false);

	}
	scene->amb_light.rgb.x = rgb[0];
	scene->amb_light.rgb.y = rgb[1];
	scene->amb_light.rgb.z = rgb[2];
	return (true);
}

bool	set_res(char **attributes, t_scene *scene){
	int x;
	int y;

	x = ft_atoi(attributes[1]);
	y = ft_atoi(attributes[2]);
	if (x <= 0 || y <= 0)
		return (false);
	scene->res.x = x;
	scene->res.y = y;
	return (true);
}

bool	set_ambl(char **attributes, t_scene *scene){
	uint8_t	ratio;
	ratio = ft_atof(attributes[1]);
	if (ratio < 0.0 || ratio > 1.0)
		return (false);
	scene->amb_light.ratio = ratio;
	if (!parse_color(attributes[2], scene))
		return (false);
	return (true);
}

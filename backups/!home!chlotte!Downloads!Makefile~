# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: lyhamrou <marvin@42.fr>                    +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2020/02/06 19:06:41 by lyhamrou          #+#    #+#              #
#    Updated: 2020/02/27 05:26:16 by lyhamrou         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

NAME = guimp
HEADER = include/guimp.h include/dimension.h
FLAG = -Wall -Wextra -Werror
COMPILATION = gcc $(FLAG)
LIBFT_PATH = lib/libft/
LIBUI_PATH = lib/libui/
SDL_PATH = lib/SDL2-2.0.12
SDL_TTF_PATH = lib/SDL2_ttf-2.0.15
SDL_IMG_PATH = lib/SDL2_image-2.0.5
INCLUDES = -I include -I $(LIBFT_PATH) -I $(LIBUI_PATH)include -I $(SDL_PATH)/include -I $(SDL_IMG_PATH)/include/
LD_LIB = -lft -L $(LIBFT_PATH) -lui -L $(LIBUI_PATH) -lSDL2 -L $(SDL_PATH)/lib/ -lSDL2_image -L $(SDL_IMG_PATH)/lib/
SRC_PATH = src/
SRC_NAME = debug.c main.c init.c loop_event.c keydown_event.c render.c \
		   init_zone_1.c init_zone_2.c init_zone_3.c init_zone_4.c \
		   init_zone_5.c init_zone_6.c init_zone_7.c init_zone_8.c mouse_click_down.c \
		   event_zone1.c event_zone2.c event_zone3.c event_zone4.c event_zone5.c \
		   event_zone6.c event_zone7.c event_zone8.c
SRC = $(addprefix $(SRC_PATH),$(SRC_NAME))
OBJ_PATH = .objs/
OBJ_NAME = $(SRC_NAME:.c=.o)
OBJ = $(addprefix $(OBJ_PATH),$(OBJ_NAME))
LIBUI_A = $(LIBUI_PATH)libui.a
SDL_MAIN_PATH = lib/SDL2-2.0.12/
FREETYPE_PATH = lib/freetype-2.10.1/
SDL_TTF_PATH = lib/SDL2_ttf-2.0.15/
SDL_IMG_PATH = lib/SDL2_image-2.0.5/

all: $(NAME)

$(NAME): $(OBJ_PATH) $(LIBUI_A) $(OBJ)
	$(COMPILATION) $(LD_LIB) $(INCLUDES) -o $(NAME) $(OBJ) #`sdl2-config --cflags --libs`

$(LIBUI_A):
	make -C $(LIBUI_PATH)

$(OBJ_PATH):
	mkdir -p $(OBJ_PATH)

$(OBJ_PATH)%.o: $(SRC_PATH)%.c $(HEADER)
	$(COMPILATION) $(INCLUDES) -o $@ -c $<

clean:
	rm -rf $(NAME)
	make clean -C $(LIBUI_PATH)

fclean: clean
	rm -rf $(OBJ_PATH)
	make fclean -C $(LIBUI_PATH)

re: fclean all

save: fclean
	git add .
	git commit -m "auto-save"
	git push

.PHONY: all clean fclean re
